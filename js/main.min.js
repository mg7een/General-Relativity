function pathPrepare(e){var n=e[0].getTotalLength();e.css("stroke-dasharray",n),e.css("stroke-dashoffset",n)}var resize=function(){windowWidth=window.innerWidth,windowHeight=window.innerHeight};resize(),$(window).on("resize",resize);var controller=new ScrollMagic({}),scene1_bgAnimation=(new TimelineMax).add([TweenMax.to(".grc-section-1-scale-wrapper",20,{y:"-10%"}),TweenMax.to(".grc-section-2-bg",10,{backgroundColor:"#001d23"}),TweenMax.to(".grc-section-2-bg-stars",5,{opacity:1})]),scene1_animation=(new TimelineMax).add([TweenMax.to(".grc-section-1-book-cover",.5,{rotationY:"-90"}),TweenMax.to(".grc-section-1-book-cover-back",.5,{rotationY:"-90"})]).add([TweenMax.to(".grc-section-1-book-cover",.01,{opacity:"0"})]).add([TweenMax.to(".grc-section-1-book-cover-back",.5,{rotationY:"-180"})]).add([TweenMax.to(".grc-section-1-scale-wrapper",.5,{scale:5,x:"20%",opacity:0})]).add([TweenMax.to(".grc-section-2-character",5,{left:"100%"})]),scene1=new ScrollScene({duration:3e3}).setPin(".grc-section-1").setTween([scene1_animation,scene1_bgAnimation]);TweenMax.set(".grc-section-2",{position:"fixed",top:"0","z-index":"-1"});var scene2=new ScrollScene({duration:1e3,triggerElement:".grc-section-2",triggerHook:"0"}),_veh1=$(".grc-section-3-vehicle-1"),_panelRight=$(".grc-section-3-panel-right"),scene3_animation=TweenMax.to(_veh1,1,{x:"300",repeat:-1});scene3_animation.pause();var scene3=new ScrollScene({duration:1e3,triggerElement:".grc-section-3",triggerHook:"0"});scene3.on("enter",function(){scene3_animation.play(),$(_panelRight).addClass("animated")}),scene3.on("leave",function(){scene3_animation.pause(),$(_panelRight).removeClass("animated")}),TweenMax.set(".grc-section-4-bg",{scale:4});var scene4_animation=(new TimelineMax).add([TweenMax.to(".grc-section-4-bg",1,{scale:1})]),scene4=new ScrollScene({duration:1e3,triggerElement:".grc-section-4",triggerHook:"0"}).setTween(scene4_animation).setPin(".grc-section-4");scene4.on("enter",function(e){"FORWARD"==e.scrollDirection&&TweenMax.set(".grc-section-2",{position:"absolute"})}),scene4.on("leave",function(e){"REVERSE"==e.scrollDirection&&TweenMax.set(".grc-section-2",{position:"fixed"})});var scene5=new ScrollScene,_roofLine=$(".grc-section-6-roof-line"),scene6=new ScrollScene({duration:1e3,triggerElement:".grc-section-6",triggerHook:"0"}).setPin(".grc-section-6");scene6.on("enter",function(){$(_roofLine).addClass("animated")}),scene6.on("leave",function(e){"REVERSE"==e.scrollDirection&&$(_roofLine).removeClass("animated")});var _cosmos=$(".grc-section-7-cosmos"),_s7Svg=$("#s7-svg"),_cosmosWidth=2703,scene7_animation=(new TimelineMax).add([TweenMax.to(_cosmos,1,{x:"-"+(_cosmosWidth-windowWidth)}),TweenMax.to(_s7Svg,1,{x:"-100%"})]),$word=$("path#word"),$dot=$("path#dot");pathPrepare($word),pathPrepare($dot);var scene7_svgtween=(new TimelineMax).add(TweenMax.to($word,.9,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to($dot,.1,{strokeDashoffset:0,ease:Linear.easeNone})).add(TweenMax.to("path",1,{stroke:"#33629c",ease:Linear.easeNone}),0),scene7=new ScrollScene({duration:2e3,triggerElement:".grc-section-7",triggerHook:"0"}).setPin(".grc-section-7").setTween([scene7_animation,scene7_svgtween]);controller.addScene([scene1,scene2,scene3,scene4,scene5,scene6,scene7]);